<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Starving Artist Prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cardo:wght@400;700&family=Cinzel:wght@600;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
  <style>
    body {
  font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  /* Saturday morning / Saved by the Bell sky */
  background: radial-gradient(circle at top, #3f51b5 0, #00bcd4 40%, #00acc1 100%);
  color: #eee;
  margin: 0;
  padding: 0;
}

    header {
  padding: 14px 20px;
  /* Colorful title bar – like a TV show logo strip */
  background: linear-gradient(90deg, #ff4081, #7c4dff, #40c4ff);
  border-bottom: 2px solid rgba(255, 255, 255, 0.7);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.55);
}


header h1 {
  margin: 0 0 4px;
  font-size: 26px;
  font-family: 'Cinzel', 'Cardo', serif;
  letter-spacing: 0.18em;
  text-transform: uppercase;
}


    header .meta {
      font-size: 13px;
      color: #bbb;
      display: flex;
      gap: 16px;
    }

    /* Board container: feels like a physical board on a table */
main.app {
  display: grid;
  grid-template-columns: 2fr minmax(260px, 1fr);
  gap: 16px;
  padding: 16px 20px 20px;
  box-sizing: border-box;
  max-width: 1100px;
  margin: 20px auto 32px;
  /* Light, playful board surface */
  background: linear-gradient(
    135deg,
    #ffffff 0,
    #fff3e0 30%,
    #f3e5f5 65%,
    #e3f2fd 100%
  );
  border-radius: 20px;
  /* Candy-colored frame around the board */
  border: 3px solid #ff4081;
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.7);
}



    .panel {
  border-radius: 18px;
  padding: 12px 14px;
  background: #141822;
  border: 2px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.65);
  color: #f5f5f5;
}

    h2, h3 {
      margin: 0 0 8px;
    }

    .board-column {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .player-column {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .stage-band {
  border-radius: 18px;
  padding: 10px 12px 12px;
  border: 2px solid #212121;
  /* Light card base – the per-stage classes will tint this */
  background: #ffffff;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.45);
  color: #1b1b1b;
  position: relative;
  overflow: hidden;
}

/* A faint zigzag / stripe pattern overlay for fun */
.stage-band::before {
  content: "";
  position: absolute;
  inset: 0;
  opacity: 0.18;
  pointer-events: none;
  background-image:
    linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.8) 0,
      rgba(255, 255, 255, 0) 45%
    ),
    repeating-linear-gradient(
      -45deg,
      rgba(0, 0, 0, 0.06) 0,
      rgba(0, 0, 0, 0.06) 2px,
      transparent 2px,
      transparent 6px
    );
}

/* Keep content above the pattern overlay */
.stage-band > * {
  position: relative;
  z-index: 1;
}

.stage-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.stage-title {
  font-size: 18px;
  font-weight: 600;
  font-family: 'Cinzel', 'Cardo', serif;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: #212121;
}

.stage-subtitle {
  font-size: 12px;
  color: #424242;
  margin-top: 2px;
}

/* Stage colors – bright Saturday-morning versions of brown, blue, yellow, green */
.stage-home {
  background: linear-gradient(135deg, #ffe0b2 0, #ffcc80 55%, #ffb74d 100%);
  border-color: #fb8c00;
}

.stage-dreamer {
  background: linear-gradient(135deg, #e1f5fe 0, #81d4fa 55%, #4fc3f7 100%);
  border-color: #0288d1;
}

.stage-amateur {
  background: linear-gradient(135deg, #fff9c4 0, #ffe082 55%, #ffd54f 100%);
  border-color: #f9a825;
}

.stage-pro {
  background: linear-gradient(135deg, #e8f5e9 0, #a5d6a7 55%, #81c784 100%);
  border-color: #2e7d32;
}

    /* Arrows between stages (visual ladder up the board) */
.stage-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: -6px 0 -6px; /* overlap slightly with stages above/below */
  pointer-events: none; /* purely visual */
}

.stage-arrow-icon {
  font-size: 26px;
  line-height: 1;
  padding: 4px 14px 6px;
  border-radius: 999px;
  background: linear-gradient(135deg, #ff4081, #ffc107);
  color: #1b1b1b;
  border: 3px solid #212121;
  box-shadow: 0 4px 0 rgba(0, 0, 0, 0.6);
}

/* Hide the text label entirely */
.stage-arrow-label {
  display: none;
}



.stage-body {
  font-size: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.stage-body,
.player-panel {
  line-height: 1.4;
}

    .stage-actions {
  margin-top: 4px;
}


    .stage-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }


    /* Tracks */

    .home-track {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.track-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.track-row-label {
  min-width: 70px;
  font-size: 11px;
  color: #616161;
}

.track-row-cells {
  display: flex;
  gap: 4px;
}

.track-cell {
  width: 18px;
  height: 18px;
  border-radius: 6px;
  border: 1px solid #b0bec5;
  background: #ffffff;
  box-sizing: border-box;
}

.track-cell.filled {
  background: linear-gradient(135deg, #ffeb3b, #ffc107);
  border-color: #f9a825;
}


    .minorworks-track {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.track-steps {
  display: flex;
  gap: 4px;
  align-items: flex-end;
}

.track-step {
  min-width: 32px;
  border-radius: 10px;
  padding: 3px 4px;
  border: 1px solid #455a64;
  background: #263238;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

.track-step-label {
  font-size: 10px;
  color: #cfd8dc;
}

.track-step-tokens {
  display: flex;
  flex-wrap: wrap;
  gap: 2px;
  justify-content: center;
}

.player-token {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 2px solid #eceff1;
  background: #888;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
}


    .job-market {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .job-card {
      border-radius: 6px;
      border: 1px solid #555;
      background: rgba(0, 0, 0, 0.3);
      padding: 4px 6px;
      min-width: 110px;
      font-size: 11px;
    }

    .job-card-title {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .job-card-effects {
      color: #ccc;
    }

    .job-card-empty {
      font-size: 11px;
      color: #ccc;
      font-style: italic;
    }

    /* Player panel */

    .player-panel h2 {
  margin-bottom: 6px;
  font-size: 16px;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: #eceff1;
}


    .player-header {
  margin-bottom: 10px;
  font-size: 13px;
}


    .player-name {
  font-weight: 700;
  font-size: 16px;
  color: #ffffff;
}


    .player-artpath {
  font-size: 12px;
  color: #cfd8dc;
}


    .badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  border: 2px solid #212121;
  margin-left: 6px;
  background: #ffffff;
  color: #212121;
}

/* Stage-specific badge colors, matching the stage bands */
.badge.home {
  border-color: #fb8c00;
  background: #fff3e0;
  color: #e65100;
}

.badge.dreamer {
  border-color: #0288d1;
  background: #e1f5fe;
  color: #01579b;
}

.badge.amateur {
  border-color: #f9a825;
  background: #fff9c4;
  color: #f57f17;
}

.badge.pro {
  border-color: #2e7d32;
  background: #e8f5e9;
  color: #1b5e20;
}


    .section-title {
  margin-top: 10px;
  font-size: 11px;
  text-transform: uppercase;
  color: #90a4ae;
  letter-spacing: 0.14em;
}

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4px 12px;
      font-size: 13px;
      margin-top: 4px;
    }

    .label {
  color: #b0bec5;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
}

    .value {
  font-weight: 700;
  font-size: 14px;
  color: #ffffff;
}

    .player-progress {
  font-size: 12px;
  margin-top: 4px;
  color: #eceff1;
}

    .controls-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 6px;
      margin-top: 4px;
    }

    button {
  /* Candy pill button */
  background: linear-gradient(135deg, #ff4081, #ffc107);
  color: #1b1b1b;
  border-radius: 999px;
  border: none;
  padding: 7px 11px;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  cursor: pointer;
  box-shadow: 0 3px 0 rgba(0, 0, 0, 0.3);
  transition:
    transform 0.06s ease,
    box-shadow 0.06s ease,
    filter 0.06s ease;
}

button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 0 rgba(0, 0, 0, 0.35);
  filter: brightness(1.05);
}

button:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
}

button:disabled {
  opacity: 0.5;
  cursor: default;
  box-shadow: none;
  transform: none;
}


    select {
      background: #222;
      color: #eee;
      border-radius: 4px;
      border: 1px solid #444;
      padding: 4px;
      font-size: 13px;
    }

    .log {
      font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      background: #101010;
      border-radius: 6px;
      padding: 6px;
      border: 1px solid #333;
      white-space: pre-wrap;
    }

    .game-over {
      margin-top: 6px;
      padding: 6px 8px;
      border-radius: 6px;
      background: #3e1b1b;
      border: 1px solid #a33;
      color: #fdd;
      font-size: 13px;
    }

    pre {
      margin: 0;
      font-family: "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      white-space: pre-wrap;
    }

       /* Card popup overlay */
.card-overlay {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: radial-gradient(
    circle at top,
    rgba(63, 81, 181, 0.45),
    rgba(0, 0, 0, 0.6)
  );
  z-index: 1000;
}
.card-overlay.visible {
  display: flex;
}
.card-modal {
  background: #ffffff;
  border-radius: 20px;
  border: 3px solid #ff4081;
  padding: 18px 20px;
  max-width: 420px;
  width: calc(100% - 40px);
  box-shadow: 0 14px 32px rgba(0, 0, 0, 0.55);
}
.card-modal h2 {
  margin: 0 0 4px;
  font-size: 18px;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: #ff4081;
}
.card-modal h3 {
  margin: 0 0 8px;
  font-size: 16px;
  font-weight: 700;
  color: #212121;
}
.card-modal pre {
  margin: 0 0 12px;
  font-size: 13px;
  white-space: pre-wrap;
  color: #424242;
}
.card-modal button {
  width: 100%;
  margin-top: 4px;
}


        /* Time bar (for Time this turn) */
.time-bar {
  display: inline-flex;
  gap: 4px;
  margin-left: 8px;
  vertical-align: middle;
}
.time-segment {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 1px solid #546e7a;
  background: #263238;
  box-sizing: border-box;
}
.time-segment.filled {
  background: linear-gradient(135deg, #00e676, #00c853);
  border-color: #00c853;
}



    /* Dice roll popup */
.dice-overlay {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: radial-gradient(
    circle at bottom,
    rgba(64, 196, 255, 0.45),
    rgba(0, 0, 0, 0.6)
  );
  z-index: 1001;
}
.dice-overlay.visible {
  display: flex;
}
.dice-modal {
  background: #ffffff;
  border-radius: 20px;
  border: 3px solid #40c4ff;
  padding: 18px 22px;
  max-width: 260px;
  width: calc(100% - 40px);
  text-align: center;
  box-shadow: 0 14px 32px rgba(0, 0, 0, 0.55);
}
.dice-modal h2 {
  margin: 0 0 8px;
  font-size: 16px;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: #0288d1;
}
.dice-face {
  font-size: 56px;
  margin: 12px 0 16px;
  text-shadow: 0 3px 0 rgba(0, 0, 0, 0.25);
}
.dice-face.rolling {
  animation: dice-wiggle 0.15s linear infinite;
}
@keyframes dice-wiggle {
  0%   { transform: translateX(0); }
  25%  { transform: translateX(-2px); }
  50%  { transform: translateX(2px); }
  75%  { transform: translateX(-1px); }
  100% { transform: translateX(0); }
}

  </style>
</head>
<body>
  <header>
    <h1>Starving Artist</h1>
    <div class="meta">
      <div>Turn: <span id="turn">1</span></div>
      <div>Art Path: <span id="artPath"></span></div>
    </div>
  </header>

  <main class="app">
    <!-- LEFT: BOARD COLUMN -->
    <div class="board-column">
  <!-- Pro Stage (top of the ladder) -->
  <section class="stage-band stage-pro">
    <div class="stage-header">
      <div>
        <div class="stage-title">Pro</div>
        <div class="stage-subtitle" id="proPromotion"></div>
      </div>
      <div class="stage-players">
        <span class="stage-players-label">Players here:</span>
        <div id="proStagePlayers"></div>
      </div>
    </div>
    <div class="stage-body">
      <div class="stage-row">
        <div>
          <div class="label">Masterwork Track</div>
          <div id="masterworkTrack"></div>
        </div>
        <div>
          <button id="drawProCardBtn" type="button">Draw Pro Card</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Arrow: Amateur → Pro -->
  <div class="stage-arrow">
    <span class="stage-arrow-icon">↑</span>
    <span class="stage-arrow-label">Advance to Pro</span>
  </div>

  <!-- Amateur Stage -->
  <section class="stage-band stage-amateur">
    <div class="stage-header">
      <div>
        <div class="stage-title">Amateur</div>
        <div class="stage-subtitle" id="amateurPromotion"></div>
      </div>
      <div class="stage-players">
        <span class="stage-players-label">Players here:</span>
        <div id="amateurStagePlayers"></div>
      </div>
    </div>
    <div class="stage-body">
      <div class="stage-row">
        <div class="job-market">
          <div class="label" style="width:100%;">Available Jobs</div>
          <div id="jobMarket" style="width:100%; display:flex; flex-wrap:wrap; gap:6px;"></div>
        </div>
        <div>
          <button id="takeProfDevBtn" type="button">Draw Prof Dev Card</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Arrow: Dreamer → Amateur -->
  <div class="stage-arrow">
    <span class="stage-arrow-icon">↑</span>
    <span class="stage-arrow-label">Advance to Amateur</span>
  </div>

  <!-- Dreamer Stage -->
  <section class="stage-band stage-dreamer">
    <div class="stage-header">
      <div>
        <div class="stage-title">Dreamer</div>
        <div class="stage-subtitle" id="dreamerPromotion"></div>
      </div>
      <div class="stage-players">
        <span class="stage-players-label">Players here:</span>
        <div id="dreamerStagePlayers"></div>
      </div>
    </div>
    <div class="stage-body">
      <div class="stage-row">
        <div class="minorworks-track">
          <div class="label">Minor Works Ladder</div>
          <div id="minorWorksTrack"></div>
        </div>
        <div>
          <button id="attendSocialBtn" type="button">Draw Social Card</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Arrow: Home → Dreamer -->
  <div class="stage-arrow">
    <span class="stage-arrow-icon">↑</span>
    <span class="stage-arrow-label">Advance to Dreamer</span>
  </div>

  <!-- Home Stage (bottom of the ladder) -->
  <section class="stage-band stage-home">
    <div class="stage-header">
      <div>
        <div class="stage-title">Home</div>
        <div class="stage-subtitle" id="homePromotion"></div>
      </div>
      <div class="stage-players">
        <span class="stage-players-label">Players here:</span>
        <div id="homeStagePlayers"></div>
      </div>
    </div>
    <div class="stage-body">
      <div class="stage-row">
        <div class="home-track">
          <div class="label">Home Path (3 successes)</div>
          <div id="homePathTrack"></div>
        </div>
        <div>
          <button id="drawHomeBtn" type="button">Draw Home Card</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Game over banner (board-level) -->
  <section id="gameOverPanel" class="panel">
    <div id="gameOverBanner" class="game-over" style="display:none;"></div>
  </section>
</div>


    <!-- RIGHT: PLAYER COLUMN -->
    <div class="player-column">
      <section id="playerPanel" class="panel player-panel">
        <h2>Active Player</h2>
        <div class="player-header">
          <div class="player-name" id="playerName">Player 1</div>
          <div class="player-artpath">
            <span id="playerArtPath">author</span>
            <span id="stageBadge" class="badge home">Home</span>
          </div>
        </div>

        <!-- Stats -->
        <div class="section-title">Stats</div>
        <div class="stats-grid">
          <div>
            <div class="label">Money</div>
            <div class="value" id="statMoney">0</div>
          </div>
          <div>
            <div class="label">Food</div>
            <div class="value" id="statFood">0</div>
          </div>
          <div>
            <div class="label">Inspiration</div>
            <div class="value" id="statInspiration">0</div>
          </div>
          <div>
            <div class="label">Craft</div>
            <div class="value" id="statCraft">0</div>
          </div>
                    <div>
            <div class="label">Time</div>
            <div class="value">
              <span id="statTime">0</span>
              <div id="timeBar" class="time-bar">
                <div class="time-segment"></div>
                <div class="time-segment"></div>
                <div class="time-segment"></div>
                <div class="time-segment"></div>
                <div class="time-segment"></div>
                <div class="time-segment"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Progress summary -->
        <div class="player-progress">
          Minor Works: <span id="minorWorksCount">0</span><br />
          Portfolio: <span id="portfolioStatus">Not yet</span><br />
          Masterwork: <span id="masterworkProgress">0 / 0</span>
        </div>

        <!-- Job / Culture -->
        <div class="player-job-section">
          <div class="section-title">Job & Culture</div>
          <div style="font-size:12px;">
            Job: <span id="jobInfo">No job (or lost job)</span><br />
            Culture: <span id="cultureInfo">None (not implemented yet)</span>
          </div>
        </div>


        <!-- Minor works list -->
        <div class="section-title">Minor Works (this player)</div>
        <pre id="minorWorksList">None yet.</pre>

        <!-- Current / recent card info -->
        <div class="section-title">Recent Events</div>
        <pre id="cardInfo">No recent events yet.</pre>

                <!-- Actions -->
        <div class="section-title">Actions</div>

        <!-- Turn controls (always visible) -->
        <div class="label" style="margin-top:4px;">Turn</div>
        <div class="controls-grid">
          <button id="rollTimeBtn" type="button">Roll Time</button>
          <button id="endTurnBtn" type="button">End Turn</button>
        </div>

        <!-- Home-only actions -->
        <div class="stage-actions stage-home-only">
          <div class="label" style="margin-top:8px;">Home</div>
          <div class="controls-grid">
            <button id="attemptLeaveHomeBtn" type="button">Try to Leave Home</button>
          </div>
        </div>

        <!-- Dreamer-only actions -->
        <div class="stage-actions stage-dreamer-only">
          <div class="label" style="margin-top:8px;">Dreamer</div>
          <div class="controls-grid">
            <button id="attemptAdvanceDreamerBtn" type="button">Try to Advance</button>
          </div>
        </div>

        <!-- Amateur-only actions -->
        <div class="stage-actions stage-amateur-only">
          <div class="label" style="margin-top:8px;">Amateur</div>
          <div class="controls-grid">
            <select id="jobSelect">
              <option value="">Choose a Job…</option>
            </select>
            <button id="chooseJobBtn" type="button">Choose Job</button>
            <button id="goToWorkBtn" type="button">Go To Work</button>
            <button id="startMinorWorkBtn" type="button">Start Minor Work</button>
            <button id="compilePortfolioBtn" type="button">Compile Portfolio</button>
            <button id="attemptAdvanceProBtn" type="button">Try to Go Pro</button>
          </div>
        </div>

        <!-- Pro-only actions -->
        <div class="stage-actions stage-pro-only">
          <div class="label" style="margin-top:8px;">Pro</div>
          <div class="controls-grid">
            <button id="workMasterworkBtn" type="button">Work on Masterwork</button>
            <button id="proMaintenanceBtn" type="button">Maintenance Check</button>
          </div>
        </div>

      </section>

      <!-- Debug panel -->
      <section id="debugPanel" class="panel">
        <h2 style="display:flex; justify-content:space-between; align-items:center; margin-bottom:6px;">
          <span>Debug</span>
          <button id="toggleDebug" type="button">Toggle Debug</button>
        </h2>
        <pre id="debugLog" class="log" style="display:none;">{}</pre>
      </section>
    </div>
  </main>

    <!-- Card popup overlay -->
  <div id="cardOverlay" class="card-overlay">
    <div class="card-modal">
      <h2 id="cardOverlayTitle">Card</h2>
      <h3 id="cardOverlayName"></h3>
      <pre id="cardOverlayBody"></pre>
      <button id="cardOverlayClose" type="button">Attend</button>
      <button id="cardOverlaySkip" type="button" style="display:none;">Skip</button>
    </div>
  </div>

  <!-- Dice roll overlay -->
  <div id="diceOverlay" class="dice-overlay">
    <div class="dice-modal">
      <h2>Time Roll</h2>
      <div id="diceFace" class="dice-face">-</div>
      <button id="diceOkButton" type="button">OK</button>
    </div>
  </div>
  
  <!-- keep this at the very end -->
  <script type="module" src="./src/main.js"></script>
</body>
</html>
